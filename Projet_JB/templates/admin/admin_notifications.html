{% extends "base.html" %}

{% block title %}Notifications - Admin{% endblock %}

{% block content %}

<!-- HEADER ADMIN -->
<header class="admin-header">
    <div class="admin-container">
        <h1>üé® Tableau de bord Admin</h1>
        <nav class="admin-nav">
            <a href="{{ url_for('admin_dashboard') }}" class="nav-btn {% if active=='dashboard' %}active{% endif %}">Dashboard</a>
            <a href="{{ url_for('admin_paintings') }}" class="nav-btn {% if active=='paintings' %}active{% endif %}">Peintures</a>
            <a href="{{ url_for('admin_orders') }}" class="nav-btn {% if active=='orders' %}active{% endif %}">Commandes</a>
            <a href="{{ url_for('admin_users') }}" class="nav-btn {% if active=='users' %}active{% endif %}">Utilisateurs</a>
            <a href="{{ url_for('admin_exhibitions') }}" class="nav-btn {% if active=='exhibitions' %}active{% endif %}">Exhibitions</a>
            <a href="{{ url_for('admin_notifications') }}" class="nav-btn {% if active=='notifications' %}active{% endif %}">
                üîî Notifications
                {% if new_notifications_count > 0 %}
                <span class="badge">{{ new_notifications_count }}</span>
                {% endif %}
            </a>
            <!-- Nouvel onglet Param√®tres -->
            <a href="{{ url_for('admin_settings_page') }}" class="nav-btn {% if active=='settings' %}active{% endif %}">‚öôÔ∏è Param√®tres</a>

            <a href="{{ url_for('add_painting_web') }}" class="nav-btn btn-primary">+ Ajouter</a>
        </nav>
    </div>
</header>

<section class="admin-section">
    <div class="admin-container">
        <h2>üîî Notifications</h2>

        {% if notifications %}
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Message</th>
                    <th>Date</th>
                    <th>Lu</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for notif in notifications %}
                <tr class="{% if notif[3] == 0 %}unread{% endif %}">
                    <td>{{ notif[0] }}</td>
                    <td>{{ notif[1] }}</td>
                    <td>{{ notif[4] }}</td>
                    <td>{{ '‚úÖ' if notif[3] else '‚ùå' }}</td>
                    <td>
                        {% if notif[3] == 0 %}
                        <a href="{{ url_for('mark_notification_read', notif_id=notif[0]) }}" class="btn-action btn-success">Marquer lu</a>
                        {% endif %}
                        {% if notif[2] %}
                        <a href="{{ notif[2] }}" class="btn-action btn-primary">Voir</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="text-align:center; color:#999; padding:40px;">Aucune notification pour le moment.</p>
        {% endif %}
    </div>
</section>

<style>
.admin-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
.admin-table th, .admin-table td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: left;
}
.admin-table tr.unread {
    background-color: #f9f9f9;
    font-weight: bold;
}
.btn-action {
    padding: 5px 10px;
    margin: 2px;
    border-radius: 5px;
    color: #fff;
    text-decoration: none;
    font-size: 13px;
    transition: 0.2s;
}
.btn-success { background-color: #28a745; }
.btn-success:hover { background-color: #218838; }
.btn-primary { background-color: #1E3A8A; }
.btn-primary:hover { background-color: #3B65C4; }
.badge {
    background-color: red;
    color: #fff;
    border-radius: 50%;
    padding: 2px 7px;
    font-size: 12px;
    margin-left: 5px;
}
</style>

{% endblock %}
